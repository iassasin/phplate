# API

Все доступные функции находятся в классе Template

---

```php
public static function Template::init($tplpath, TemplateOptions $options = null)
```

 Инициализирует phplate, задает каталог, хранящий шаблоны (файлы .html)
 Если настройки не заданы, то шаблонизатор будет инициализирован с настройками по умолчанию

- **`string $tplpath`** - путь к каталогу, содержащему шаблоны сайта
- **`TemplateOptions $options`** - определяет [настройки Phplate](options.md)
- **Возвращаемое значение**: объект класса `TemplateEngine`.  
Использование объекта `TemplateEngine` может быть полезно в тех случаях, когда требуется работа *Phplate* в нескольких режимах, то есть с разными настройками.  
В классе `TemplateEngine` доступны все те же методы API, что и в `Template`, но как нестатичные методы класса.  
Важно отметить, что *API* всегда работает именно с теми настройками, которые были переданы в `Template::init` перед использованием *API*.

Доступные опции и пример настройки смотрите в статье [настройки Phplate](options.md)

---

```php
public static function Template::addUserFunctionHandler($f)
```

Назначает пользовательский обработчик пайп-функций

- **`function $f`** - функция вида **`function ($val, $fargs)`**
  - **`mixed $val`** - исходное значение
  - **`array $fargs`** - массив переданных пайп-функции аргументов
  - **Возвращаемое значение**:  новое значение `$val`
- **Возвращаемое значение**:  нет

---

```php
public static function Template::addGlobalVar($name, $val)
```

Добавляет новый глобальный аргумент (глобальную переменную)

- **`string $name`** - имя глобального аргумента
- **`mixed $val`** - значение глобальной переменной, передается по значению
- **Возвращаемое значение**: нет

---

```php
public static function Template::build($tplName, $values)
```

Выполняет подстановку в аргументов в шаблон из указанного файла

- **`string $tplName`** - путь к шаблону, без расширения и базового пути (который задается функцией init)
- **`array $values`** - аргументы шаблона, могут быть чем угодно
- **Возвращаемое значение**: **`string`**, шаблон с подставленными аргументами
- **Исключения**: **`PhplateCompilerException`**, **`PhplateRuntimeException`**

---

```php
public static function Template::buildStr($tplStr, $values)
```

Выполняет подстановку в аргументов в шаблон, переданный функции напрямую

- **`string $tplStr`** - код шаблона, в который подставляются аргументы, аналогично содержимому файлов шаблонов
- **`array $values`** - аргументы шаблона, могут быть чем угодно
- **Возвращаемое значение**: **`string`**, шаблон с подставленными аргументами
- **Исключения**: **`PhplateCompilerException`**, **`PhplateRuntimeException`**

---

```php
public static function Template::buildFile($tplPath, $values)
```

Выполняет подстановку в аргументов в шаблон из произвольного указанного файла

- **`string $tplPath`** - полный путь к шаблону из любой директории, включая расширение файла шаблона
- **`array $values`** - аргументы шаблона, могут быть чем угодно
- **Возвращаемое значение**: **`string`**, шаблон с подставленными аргументами
- **Исключения**: **`PhplateCompilerException`**, **`PhplateRuntimeException`**
